<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stilleaf</title>
    <link href="./styles/home.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="icon" href="./tree-green.png">
</head>
<body>
    <div id="username" hidden><%= user.username %></div>
    <div id="email" hidden><%= user.email %> </div>

    <nav>
        <div style="display: flex; align-items: center; gap: 15px;">
            <img id='tree' src="tree.png">
            <h1 style="display: inline;">Stilleaf</h1>
        </div>
    </nav>
    <div id="page-content">
        <div id="side-bar">
            <div id="search-bar-div">
                <input id="search-bar" type="text" placeholder="Search Reflections">
                <img src="sortby.png" style=" display:block; width: auto; height: 30px;">
            </div>
            <div id="new-note-button-container">
                <button id="new-note-sidebar-button"> New Reflection <img src="plus.png" style="width: 20px; margin-left: 5px; transform: translateY(-2px);"> </button>
                
            </div>
            <div id="notes-list">
                <% for(let i = 0; i < reflections.length; i++){%>
                    <div class="reflection-li" data-selected="false" data-post_id="<%= reflections[i].id %>" data-reflection_title="<%= reflections[i].title %>">
                        <div class="reflection-li-content">
                            <p  class="reflection-li-title" style="font-weight: bold; font-size: 1.2rem;"><%= reflections[i].title || 'Untitled' %></p>
                            <p class="reflection-li-body" style="font-size: 0.8rem;"><%= reflections[i].content %></p>
                            <p class="reflection-li-last-modified_ts" style="font-size: 0.6rem;" > Last modified <%= formatDateStringToEST(reflections[i].last_modified_time_stamp) %></p>
                        </div>
                        <div class="reflection-li-creation-ts">
                            <p><%= reflections[i].creation_time_stamp.toString().slice(4, 7) %> <br> <%= reflections[i].creation_time_stamp.toString().slice(8, 10) %> </p>

                        </div>
                    </div>
                <%}%>
            </div>
            <div id="logout-lock-options">
                <p><span id="logout">Logout</span></p>
            </div>
            

        </div>

        <div id="note-content">
            <div id="blank-note-content">
                <img src="leaf.jpg" id="leaf" style="height: 450px;">
                <h2>Sway Gently, Don't Snap</h2>
                <button id="new-leaf-btn">
                    New Reflection
                    <img id="plus-btn" src="add-btn.png">
                </button>
            </div>
            <div id="instantiated-note-content" style='padding:20px; width:100%; height:100%; display: none;' >
                    <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: center;">

                        <input id='title-input' placeholder='Untitled' type='text' style='border:none; padding: none; margin:none;'>
                        <img src="bin.png" id="delete" width="auto" height="30px">

                    </div>
                    <textarea id='body-input' style='border:none; padding: none; margin:none;' value=""></textarea>
            </div>
            
        </div>
	</div>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    <script src="./scripts/home.js"></script>
</body>
</html>